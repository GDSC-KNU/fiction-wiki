(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[305],{3803:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/fictions/create",function(){return t(4554)}])},4554:function(e,r,t){"use strict";t.r(r);var s=t(1224),i=t(1904),n=t(7559),l=t(8473),d=t(2760),a=t(5008),o=t(8598),u=(t(1387),t(4412),t(1774)),c=t.n(u),m=t(6625),x=t(9991),h=t(2217),f=t(5049),p=t(548),b=t(4376),g=t(2684),y=t(5367),j=t(71),w=t.n(j),v=c()((function(){return Promise.all([t.e(271),t.e(238)]).then(t.bind(t,7043))}),{loadableGenerated:{webpack:function(){return[7043]}},ssr:!1});r.default=function(e){var r=(0,g.useState)("# Hello World"),t=r[0],u=r[1],c=(0,b.useRouter)(),j=(0,l.Z)((0,p.Z)("/api/fictions"),2),Z=j[0],N=j[1],B=N.loading,q=N.data,k=(N.error,(0,y.cI)({mode:"onBlur"})),_=k.register,K=k.handleSubmit,D=(k.reset,k.resetField),T=k.watch,S=(k.formState.errors,k.setValue),L=function(){var e=(0,s.Z)((function(e){var r,s,l,d;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:return B?[2]:e.thumb&&e.thumb.length>0?[4,fetch("/api/files")]:[3,5];case 1:return[4,a.sent().json()];case 2:return r=a.sent().uploadURL,(s=new FormData).append("file",e.thumb[0],e.title),[4,fetch(r,{method:"POST",body:s})];case 3:return[4,a.sent().json()];case 4:return l=a.sent(),d=l.result.id,Z((0,n.Z)((0,i.Z)({},e),{thumbId:d,setup:t}),"POST"),[3,6];case 5:Z((0,n.Z)((0,i.Z)({},e),{setup:t}),"POST"),a.label=6;case 6:return[2]}}))}));return function(r){return e.apply(this,arguments)}}();(0,g.useEffect)((function(){(null===q||void 0===q?void 0:q.ok)&&c.push("/fictions/".concat(q.fiction.id))}),[q,c]);var C=(0,g.useState)(""),M=C[0],E=C[1],H=T("thumb");(0,g.useEffect)((function(){if(H&&H.length>0){var e=H[0];E(URL.createObjectURL(e))}}),[H]);var O=T().keywords,P=T().mcKeywords,R=T().subKeywords,A=T().consKeywords,F=T().status;return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)("div",{children:(0,o.jsxs)("form",{className:" w-[90vw]",onSubmit:K(L,(function(e){})),children:[(0,o.jsxs)("div",{className:" max-w-[1500px]",children:[(0,o.jsxs)("div",{className:" grid grid-cols-1 sm:grid-cols-5 ",children:[(0,o.jsxs)("div",{className:" bg-white col-span-2 mx-5 mt-7 h-fit border-[0.5px] border-[#BBBBBB] rounded-md overflow-hidden",children:[(0,o.jsx)("div",{className:" min-h-[330px] w-full",children:M?(0,o.jsxs)("label",{className:" relative pb-100 w-full cursor-pointer text-gray-600 hover:border-blue-500 hover:text-blue-500 flex items-center justify-center border-2 border-dashed border-gray-300 h-[330px] rounded-md",children:[(0,o.jsx)(w(),{className:" object-cover",src:M||"/",layout:"fill"}),(0,o.jsx)("input",(0,n.Z)((0,i.Z)({},_("thumb")),{className:"hidden",type:"file"}))]}):(0,o.jsxs)("label",{className:"w-full cursor-pointer text-gray-600 hover:border-blue-500 hover:text-blue-500 flex items-center justify-center border-2 border-dashed border-gray-300 h-[330px] rounded-md",children:[(0,o.jsx)("svg",{className:"h-12 w-12",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48","aria-hidden":"true",children:(0,o.jsx)("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})}),(0,o.jsx)("input",(0,n.Z)((0,i.Z)({},_("thumb")),{className:"hidden",type:"file"}))]})}),(0,o.jsxs)("div",{className:" px-4 py-3",children:[(0,o.jsx)(h.Z,{register:_("title",{required:!0}),required:!0,label:"Title",name:"title",type:"text_detail"}),(0,o.jsx)(h.Z,{register:_("relatedTitle",{required:!0}),required:!0,label:"RelatedTitle",name:"relatedTitle",type:"text_detail"}),(0,o.jsx)(h.Z,{register:_("author",{required:!0}),required:!0,label:"Author",name:"author",type:"text_detail"}),(0,o.jsx)(h.Z,{register:_("relatedAuthor",{required:!0}),required:!0,label:"RelatedAuthor",name:"relatedAuthor",type:"text_detail"}),(0,o.jsx)(h.Z,{register:_("type",{required:!0}),required:!0,label:"Type",name:"type",type:"text_detail"}),(0,o.jsx)(h.Z,{register:_("nationality",{required:!0}),required:!0,label:"Nationality",name:"nationality",type:"text_detail"}),(0,o.jsx)(h.Z,{register:_("genre"),required:!0,label:"Genre",name:"genre",type:"text_detail"}),(0,o.jsxs)("div",{className:" flex relative items-center justify-between",children:[(0,o.jsx)("div",{className:" w-[48%]",children:(0,o.jsx)(h.Z,{register:_("date.0"),required:!0,label:"StartDate",name:"startDate",type:"date"})}),(0,o.jsx)("div",{className:" w-[48%]",children:(0,o.jsx)(h.Z,{register:_("date.1"),required:!0,label:"EndDate",name:"endDate",type:"date"})})]}),(0,o.jsx)(h.Z,{register:_("original",{required:!0}),required:!0,label:"Original",name:"original",type:"text"}),(0,o.jsx)(h.Z,{register:_("platforms.0"),required:!0,label:"Platforms",name:"platforms",type:"text"}),(0,o.jsx)(h.Z,{register:_("currentState"),required:!0,label:"CurrentState",name:"currentState",type:"text"}),(0,o.jsx)(h.Z,{register:_("volume",{required:!0}),required:!0,label:"Volume",name:"volume",type:"text_detail"}),(0,o.jsx)(h.Z,{register:_("mediaMix",{required:!1}),required:!0,label:"MediaMix",name:"mediaMix",type:"text_detail"}),(0,o.jsx)(h.Z,{register:_("isTranslated",{required:!1}),required:!0,label:"IsTranslated",name:"isTranslated",type:"text_detail"})]})]}),(0,o.jsx)("div",{className:" col-span-3 mx-5 mt-7",children:(0,o.jsxs)("div",{className:" grid sm:grid-cols-1",children:[(0,o.jsxs)("div",{className:" mb-10 pb-3 px- w-full bg-white border-[0.5px] border-[#BBBBBB] rounded-md overflow-hidden",children:[(0,o.jsx)("h2",{className:" font-bold pt-1 px-2",children:"Keywords"}),(0,o.jsx)("input",(0,n.Z)((0,i.Z)({className:" w-full"},_("keywords.0")),{type:"text",placeholder:" \ud0a4\uc6cc\ub4dc(,\ub97c \ub20c\ub7ec\uc11c \uc785\ub825\ud558\uc138\uc694)",onKeyDown:function(e){","===e.key&&""!==O[0].trim()&&(e.preventDefault(),O.slice(1).includes(O[0].trim())||(O[0]=O[0].trim(),O.filter((function(e){return" "!==e})),S("keywords",[O[0]].concat((0,d.Z)(O)))),D("keywords.0"))}})),(0,o.jsx)("ul",{className:" grid grid-cols-4 md:grid-cols-5 lg:grid-cols-8 xl:grid-cols-5 pt-3 px-3",children:null===O||void 0===O?void 0:O.filter((function(e){return void 0!==e})).map((function(e,r){return(0,o.jsx)("li",{className:" bg-[#3D414D] text-white text-sm text-center ring-offset-1 mx-1 my-1 rounded-md h-fit hover:cursor-pointer",onClick:function(e){O=O.filter((function(r){return r!==e.currentTarget.innerHTML})),S("keywords",O)},children:e},r)}))})]}),(0,o.jsxs)("div",{className:" mb-10 pb-3 px- w-full bg-white border-[0.5px] border-[#BBBBBB] rounded-md overflow-hidden",children:[(0,o.jsx)("h2",{className:" font-bold pt-1 px-2",children:"Mc Keywords"}),(0,o.jsx)("input",(0,n.Z)((0,i.Z)({className:" w-full"},_("mcKeywords.0")),{type:"text",placeholder:" \ud0a4\uc6cc\ub4dc(,\ub97c \ub20c\ub7ec\uc11c \uc785\ub825\ud558\uc138\uc694)",onKeyDown:function(e){","===e.key&&""!==P[0].trim()&&(e.preventDefault(),P.slice(1).includes(P[0].trim())||(P[0]=P[0].trim(),P.filter((function(e){return" "!==e})),S("mcKeywords",[P[0]].concat((0,d.Z)(P)))),D("mcKeywords.0"))}})),(0,o.jsx)("ul",{className:" grid grid-cols-4 md:grid-cols-5 lg:grid-cols-8 xl:grid-cols-5 pt-3 px-3",children:null===P||void 0===P?void 0:P.filter((function(e){return void 0!==e})).map((function(e,r){return(0,o.jsx)("li",{className:" bg-[#3D414D] text-white text-sm text-center ring-offset-1 mx-1 my-1 rounded-md h-fit hover:cursor-pointer",onClick:function(e){P=P.filter((function(r){return r!==e.currentTarget.innerHTML})),S("keywords",P)},children:e},r)}))})]}),(0,o.jsxs)("div",{className:" mb-10 pb-3 px- w-full bg-white border-[0.5px] border-[#BBBBBB] rounded-md overflow-hidden",children:[(0,o.jsx)("h2",{className:" font-bold pt-1 px-2",children:"Sub Keywords"}),(0,o.jsx)("input",(0,n.Z)((0,i.Z)({className:" w-full"},_("subKeywords.0")),{type:"text",placeholder:" \ud0a4\uc6cc\ub4dc(,\ub97c \ub20c\ub7ec\uc11c \uc785\ub825\ud558\uc138\uc694)",onKeyDown:function(e){","===e.key&&""!==R[0].trim()&&(e.preventDefault(),R.slice(1).includes(R[0].trim())||(R[0]=R[0].trim(),R.filter((function(e){return" "!==e})),S("subKeywords",[R[0]].concat((0,d.Z)(R)))),D("subKeywords.0"))}})),(0,o.jsx)("ul",{className:" grid grid-cols-4 md:grid-cols-5 lg:grid-cols-8 xl:grid-cols-5 pt-3 px-3",children:null===R||void 0===R?void 0:R.filter((function(e){return void 0!==e})).map((function(e,r){return(0,o.jsx)("li",{className:" bg-[#3D414D] text-white text-sm text-center ring-offset-1 mx-1 my-1 rounded-md h-fit hover:cursor-pointer",onClick:function(e){R=R.filter((function(r){return r!==e.currentTarget.innerHTML})),S("subKeywords",R)},children:e},r)}))})]}),(0,o.jsxs)("div",{className:" mb-10 pb-3 px- w-full bg-white border-[0.5px] border-[#BBBBBB] rounded-md overflow-hidden",children:[(0,o.jsx)("h2",{className:" font-bold pt-1 px-2",children:"Cons Keywords"}),(0,o.jsx)("input",(0,n.Z)((0,i.Z)({className:" w-full"},_("consKeywords.0")),{type:"text",placeholder:" \ud0a4\uc6cc\ub4dc(,\ub97c \ub20c\ub7ec\uc11c \uc785\ub825\ud558\uc138\uc694)",onKeyDown:function(e){","===e.key&&""!==A[0].trim()&&(e.preventDefault(),A.slice(1).includes(A[0].trim())||(A[0]=A[0].trim(),A.filter((function(e){return" "!==e})),S("consKeywords",[A[0]].concat((0,d.Z)(A)))),D("consKeywords.0"))}})),(0,o.jsx)("ul",{className:" grid grid-cols-4 md:grid-cols-5 lg:grid-cols-8 xl:grid-cols-5 pt-3 px-3",children:null===A||void 0===A?void 0:A.filter((function(e){return void 0!==e})).map((function(e,r){return(0,o.jsx)("li",{className:" bg-[#3D414D] text-white text-sm text-center ring-offset-1 mx-1 my-1 rounded-md h-fit hover:cursor-pointer",onClick:function(e){A=A.filter((function(r){return r!==e.currentTarget.innerHTML})),S("consKeywords",A)},children:e},r)}))})]}),(0,o.jsxs)("div",{className:" h-max bg-white mb-10 w-full border-[0.5px] border-[#BBBBBB] rounded-md overflow-x-auto",children:[(0,o.jsx)("h2",{className:" font-bold pt-1 px-2",children:"graphs and charts"}),(0,o.jsx)(x.Z,{props:F}),(0,o.jsxs)("div",{className:" grid grid-cols-2 mx-2",children:[(0,o.jsx)(h.Z,{register:_("status.0",{max:5,min:0}),required:!0,label:"\uc624\ub9ac\uc9c0\ub110\ub9ac\ud2f0",name:"status",type:"number",kind:"status"}),(0,o.jsx)(h.Z,{register:_("status.1"),required:!0,label:"\ud544\ub825",name:"status",type:"number",kind:"status"}),(0,o.jsx)(h.Z,{register:_("status.2"),required:!0,label:"\uce90\ub9ad\ud130\uc131",name:"status",type:"number",kind:"status"}),(0,o.jsx)(h.Z,{register:_("status.3"),required:!0,label:"\ud54d\uc9c4\uc131",name:"status",type:"number",kind:"status"}),(0,o.jsx)(h.Z,{register:_("status.4"),required:!0,label:"\uc2a4\ud1a0\ub9ac",name:"status",type:"number",kind:"status"}),(0,o.jsx)(h.Z,{register:_("status.5"),required:!0,label:"\uc791\ud488\uc131",name:"status",type:"number",kind:"status"})]})]})]})})]}),(0,o.jsxs)("div",{className:" mx-5 my-7 bg-white px-3 py-3 border-[0.5px] border-[#BBBBBB] rounded-md overflow-hidden",children:[(0,o.jsx)(f.Z,{register:_("synopsis"),name:"synopsis",label:"Synopsis",required:!0}),(0,o.jsx)(f.Z,{register:_("characters"),name:"characters",label:"Characters",required:!0}),(0,o.jsx)("div",{children:(0,o.jsx)(v,{value:t,onChange:function(e){u(e)}})})]})]}),(0,o.jsx)(m.Z,{text:B?"Loading...":"\uc800\uc7a5"})]})})})}}},function(e){e.O(0,[757,369,765,913,431,774,888,179],(function(){return r=3803,e(e.s=r);var r}));var r=e.O();_N_E=r}]);